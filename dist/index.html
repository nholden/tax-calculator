<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title>Tax Calculator</title>
    <script src="bundle.js"></script>
    <link rel="icon" href="data:,">
  </head>
  <body class="antialiased">
    <div class="container max-w-4xl mx-auto px-2">
      <h1 class="text-3xl font-semibold my-2">
        IRS Publication 15-T: Federal Income Tax Withholding Methods
      </h1>
      <h2 class="text-lg mb-6">
        Worksheet 4. Employer’s Withholding Worksheet for Percentage Method
        Tables for Manual Payroll Systems With Forms W-4 From 2020 or Later
      </h2>

      <form x-data="data()">
        <fieldset class="mb-4">
          <legend class="text-lg font-semibold mb-2">Step 1. Adjust the employee’s wage amount</legend>
          <label class="flex flex-wrap justify-between sm:flex-no-wrap items-center mb-4 sm:mb-2">
            <div class="flex w-full mb-1 sm:w-4/6 sm:mb-0">
              <span class="mr-2">1a</span>
              <span>Enter the employee’s total taxable wages this payroll period</span>
            </div>
            <input
              type="text"
              pattern="[\d\.]*"
              inputmode="decimal"
              class="w-full sm:w-1/6 shadow appearance-none border rounded py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline"
              x-model="box1a"
            >
          </label>
          <label class="flex flex-wrap justify-between sm:flex-no-wrap items-center mb-4 sm:mb-2">
            <div class="flex w-full mb-1 sm:w-4/6 sm:mb-0">
              <span class="mr-2">1b</span>
              <span>Enter the number of pay periods you have per year</span>
            </div>
            <input
              type="text"
              pattern="[\d\.]*"
              inputmode="decimal"
              class="w-full sm:w-1/6 shadow appearance-none border rounded py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline"
              x-model="box1b"
            >
          </label>
          <label class="flex flex-wrap justify-between sm:flex-no-wrap items-center mb-4 sm:mb-2">
            <div class="flex w-full mb-1 sm:w-4/6 sm:mb-0">
              <span class="mr-2">1c</span>
              <span>Enter the amount from Step 4(a) of the employee’s Form W-4</span>
            </div>
            <input
              type="text"
              pattern="[\d\.]*"
              inputmode="decimal"
              class="w-full sm:w-1/6 shadow appearance-none border rounded py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline"
              x-model="box1c"
            >
          </label>
          <label class="flex flex-wrap justify-between sm:flex-no-wrap items-center mb-4 sm:mb-2">
            <div class="flex w-full mb-1 sm:w-4/6 sm:mb-0">
              <span class="mr-2">1d</span>
              <span>Divide line 1c by the number on line 1b</span>
            </div>
            <input
              type="text"
              pattern="[\d\.]*"
              inputmode="decimal"
              class="w-full sm:w-1/6 shadow appearance-none border rounded py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline"
              x-bind:value="box1d()"
              disabled
            >
          </label>
          <label class="flex flex-wrap justify-between sm:flex-no-wrap items-center mb-4 sm:mb-2">
            <div class="flex w-full mb-1 sm:w-4/6 sm:mb-0">
              <span class="mr-2">1e</span>
              <span>Add lines 1a and 1d</span>
            </div>
            <input
              type="text"
              pattern="[\d\.]*"
              inputmode="decimal"
              class="w-full sm:w-1/6 shadow appearance-none border rounded py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline"
              x-bind:value="box1e()"
              disabled
            >
          </label>
          <label class="flex flex-wrap justify-between sm:flex-no-wrap items-center mb-4 sm:mb-2">
            <div class="flex w-full mb-1 sm:w-4/6 sm:mb-0">
              <span class="mr-2">1f</span>
              <span>Enter the amount from Step 4(b) of the employee’s Form W-4</span>
            </div>
            <input
              type="text"
              pattern="[\d\.]*"
              inputmode="decimal"
              class="w-full sm:w-1/6 shadow appearance-none border rounded py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline"
              x-model="box1f"
            >
          </label>
          <label class="flex flex-wrap justify-between sm:flex-no-wrap items-center mb-4 sm:mb-2">
            <div class="flex w-full mb-1 sm:w-4/6 sm:mb-0">
              <span class="mr-2">1g</span>
              <span>Divide line 1f by the number on line 1b</span>
            </div>
            <input
              type="text"
              pattern="[\d\.]*"
              inputmode="decimal"
              class="w-full sm:w-1/6 shadow appearance-none border rounded py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline"
              x-bind:value="box1g()"
              disabled
            >
          </label>
          <label class="flex flex-wrap justify-between sm:flex-no-wrap items-center mb-4 sm:mb-2">
            <div class="flex w-full mb-1 sm:w-4/6 sm:mb-0">
              <span class="mr-2">1h</span>
              <span>Subtract line 1g from line 1e. If zero or less, enter -0-. This is the <strong>Adjusted Wage Amount</strong>.</span>
            </div>
            <input
              type="text"
              pattern="[\d\.]*"
              inputmode="decimal"
              class="w-full sm:w-1/6 shadow appearance-none border rounded py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline"
              x-bind:value="box1h()"
              disabled
            >
          </label>
        </fieldset>

        <fieldset class="mb-4">
          <legend class="text-lg font-semibold mb-1">Step 2. Figure the Tentative Withholding Amount</legend>
          <p class="italic text-gray-700 mb-2">
            Currently assumes W-4 from 2020 or later, semimonthly payroll period, checkbox is checked, married filing jointly.
          </p>
          <label class="flex flex-wrap justify-between sm:flex-no-wrap items-center mb-4 sm:mb-2">
            <div class="flex w-full mb-1 sm:w-4/6 sm:mb-0">
              <span class="mr-2">2a</span>
              <span>Column A from withholding rate schedule</span>
            </div>
            <input
              type="text"
              pattern="[\d\.]*"
              inputmode="decimal"
              class="w-full sm:w-1/6 shadow appearance-none border rounded py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline"
              x-bind:value="box2a()"
              disabled
            >
          </label>
          <label class="flex flex-wrap justify-between sm:flex-no-wrap items-center mb-4 sm:mb-2">
            <div class="flex w-full mb-1 sm:w-4/6 sm:mb-0">
              <span class="mr-2">2b</span>
              <span>Column C from withholding rate schedule</span>
            </div>
            <input
              type="text"
              pattern="[\d\.]*"
              inputmode="decimal"
              class="w-full sm:w-1/6 shadow appearance-none border rounded py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline"
              x-bind:value="box2b()"
              disabled
            >
          </label>
          <label class="flex flex-wrap justify-between sm:flex-no-wrap items-center mb-4 sm:mb-2">
            <div class="flex w-full mb-1 sm:w-4/6 sm:mb-0">
              <span class="mr-2">2c</span>
              <span>Column D from withholding rate schedule</span>
            </div>
            <input
              type="text"
              pattern="[\d\.%]*"
              inputmode="decimal"
              class="w-full sm:w-1/6 shadow appearance-none border rounded py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline"
              x-bind:value="box2c()"
              disabled
            >
          </label>
          <label class="flex flex-wrap justify-between sm:flex-no-wrap items-center mb-4 sm:mb-2">
            <div class="flex w-full mb-1 sm:w-4/6 sm:mb-0">
              <span class="mr-2">2d</span>
              <span>Subtract line 2a from line 1h</span>
            </div>
            <input
              type="text"
              pattern="[\d\.]*"
              inputmode="decimal"
              class="w-full sm:w-1/6 shadow appearance-none border rounded py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline"
              x-bind:value="box2d()"
              disabled
            >
          </label>
          <label class="flex flex-wrap justify-between sm:flex-no-wrap items-center mb-4 sm:mb-2">
            <div class="flex w-full mb-1 sm:w-4/6 sm:mb-0">
              <span class="mr-2">2e</span>
              <span>Multiply the amount on line 2d by the percentage on line 2c</span>
            </div>
            <input
              type="text"
              pattern="[\d\.]*"
              inputmode="decimal"
              class="w-full sm:w-1/6 shadow appearance-none border rounded py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline"
              x-bind:value="box2e()"
              disabled
            >
          </label>
          <label class="flex flex-wrap justify-between sm:flex-no-wrap items-center mb-4 sm:mb-2">
            <div class="flex w-full mb-1 sm:w-4/6 sm:mb-0">
              <span class="mr-2">2f</span>
              <span>
                Add lines 2b and 2e. This is the <strong>Tentative Withholding Amount</strong>
              </span>
            </div>
            <input
              type="text"
              pattern="[\d\.]*"
              inputmode="decimal"
              class="w-full sm:w-1/6 shadow appearance-none border rounded py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline"
              x-bind:value="box2f()"
              disabled
            >
          </label>
        </fieldset>

        <fieldset class="mb-4">
          <legend class="text-lg font-semibold mb-2">Step 3. Account for tax credits</legend>
          <label class="flex flex-wrap justify-between sm:flex-no-wrap items-center mb-4 sm:mb-2">
            <div class="flex w-full mb-1 sm:w-4/6 sm:mb-0">
              <span class="mr-2">3a</span>
              <span>Enter the amount from Step 3 of the employee’s Form W-4</span>
            </div>
            <input
              type="text"
              pattern="[\d\.]*"
              inputmode="decimal"
              class="w-full sm:w-1/6 shadow appearance-none border rounded py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline"
              x-model="box3a"
            >
          </label>
          <label class="flex flex-wrap justify-between sm:flex-no-wrap items-center mb-4 sm:mb-2">
            <div class="flex w-full mb-1 sm:w-4/6 sm:mb-0">
              <span class="mr-2">3b</span>
              <span>Divide the amount on line 3a by the number of pay periods on line 1b</span>
            </div>
            <input
              type="text"
              pattern="[\d\.]*"
              inputmode="decimal"
              size="10"
              class="w-full sm:w-1/6 shadow appearance-none border rounded py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline"
              x-bind:value="box3b()"
              disabled
            >
          </label>
          <label class="flex flex-wrap justify-between sm:flex-no-wrap items-center mb-4 sm:mb-2">
            <div class="flex w-full mb-1 sm:w-4/6 sm:mb-0">
              <span class="mr-2">3c</span>
              <span>Subtract line 3b from line 2f. If zero or less, enter -0-</span>
            </div>
            <input
              type="text"
              pattern="[\d\.]*"
              inputmode="decimal"
              class="w-full sm:w-1/6 shadow appearance-none border rounded py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline"
              x-bind:value="box3c()"
              disabled
            >
          </label>
        </fieldset>

        <fieldset class="mb-4">
          <legend class="text-lg font-semibold mb-2">Step 4. Figure the final amount to withhold</legend>
          <label class="flex flex-wrap justify-between sm:flex-no-wrap items-center mb-4 sm:mb-2">
            <div class="flex w-full mb-1 sm:w-4/6 sm:mb-0">
              <span class="mr-2">4a</span>
              <span>Enter the additional amount to withhold from Step 4(c) of the employee’s Form W-4</span>
            </div>
            <input
              type="text"
              pattern="[\d\.]*"
              inputmode="decimal"
              class="w-full sm:w-1/6 shadow appearance-none border rounded py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline"
              x-model="box4a"
            >
          </label>
          <label class="flex flex-wrap justify-between sm:flex-no-wrap items-center mb-4 sm:mb-2">
            <div class="flex w-full mb-1 sm:w-4/6 sm:mb-0">
              <span class="mr-2">4b</span>
              <span>
                Add lines 3c and 4a.
                <strong>
                  This is the amount to withhold from the employee’s wages this pay period
                </strong>
              </span>
            </div>
            </span>
            <input
              type="text"
              pattern="[\d\.]*"
              inputmode="decimal"
              class="w-full sm:w-1/6 shadow appearance-none border rounded py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline"
              x-bind:value="box4b()"
              disabled
            >
          </label>
        </fieldset>
      </form>
    </div>

    <script>
      function data() {
        function withholdingRateScheduleForWage(wage) {
          const withholdingRateSchedules = [
            { minimumWage: 0, tentativeWithholding: 0, marginalRate: 0 },
            { minimumWage: 517, tentativeWithholding: 0, marginalRate: 0.10 },
            { minimumWage: 928, tentativeWithholding: 41.10, marginalRate: 0.12 },
            { minimumWage: 2189, tentativeWithholding: 192.42, marginalRate: 0.22 },
            { minimumWage: 4080, tentativeWithholding: 608.44, marginalRate: 0.24 },
            { minimumWage: 7321, tentativeWithholding: 1386.28, marginalRate: 0.32 },
            { minimumWage: 9156, tentativeWithholding: 1973.48, marginalRate: 0.35 },
            { minimumWage: 13476, tentativeWithholding: 3485.48, marginalRate: 0.37 },
          ]

          return withholdingRateSchedules.filter((schedule) => {
            return wage >= schedule.minimumWage
          }).slice(-1)[0]
        }

        return {
          box1a: null,
          box1b: null,
          box1c: null,
          box1d() {
            return this.box1b && this.box1c && this.box1b != 0 ?
              (this.box1c / this.box1b).toFixed(2) :
              null
          },
          box1e() {
            return this.box1a && this.box1d() ?
              (Number.parseFloat(this.box1a) + Number.parseFloat(this.box1d())).toFixed(2) :
              null
          },
          box1f: null,
          box1g() {
            return this.box1b && this.box1f && this.box1b != 0 ?
              (this.box1f / this.box1b).toFixed(2) :
              null
          },
          box1h() {
            return this.box1e() && this.box1g() ?
              Math.max(this.box1e() - this.box1g(), 0).toFixed(2) :
              null
          },
          withholdingRateSchedule() {
            return this.box1h() ?
              withholdingRateScheduleForWage(this.box1h()) :
              null
          },
          box2a() {
            return this.withholdingRateSchedule() ?
              this.withholdingRateSchedule().minimumWage :
              null
          },
          box2b() {
            return this.withholdingRateSchedule() ?
              this.withholdingRateSchedule().tentativeWithholding :
              null
          },
          box2c() {
            return this.withholdingRateSchedule() ?
              `${this.withholdingRateSchedule().marginalRate * 100}%` :
              null
          },
          box2d() {
            return this.box1h() && this.box2a() ?
              (this.box1h() - this.box2a()).toFixed(2) :
              null
          },
          box2e() {
            return this.withholdingRateSchedule() && this.box2d() ?
              (this.withholdingRateSchedule().marginalRate * this.box2d()).toFixed(2) :
              null
          },
          box2f() {
            return this.box2b() && this.box2e() ?
              (Number.parseFloat(this.box2b()) + Number.parseFloat(this.box2e())).toFixed(2) :
              null
          },
          box3a: null,
          box3b() {
            return this.box1b && this.box3a && this.box1b != 0 ?
              (this.box3a / this.box1b).toFixed(2) :
              null
          },
          box3c() {
            return this.box2f() && this.box3b() ?
              Math.max(this.box2f() - this.box3b(), 0).toFixed(2) :
              null
          },
          box4a: null,
          box4b() {
            return this.box3c() && this.box4a ?
              (Number.parseFloat(this.box3c()) + Number.parseFloat(this.box4a)).toFixed(2) :
              null
          },
        }
      }
    </script>
  </body>
</html>